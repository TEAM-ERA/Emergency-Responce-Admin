/* eslint-disable no-unused-vars */
$(document).ready(function() {
  $('#dropdown-menu li a').on('click', function(event) {
    event.preventDefault();
    const id = $(this).attr('href');
    $('.tab-content .tab-item').css('display', 'none');
    $('.tab-content ' + id).css('display', 'block');
  });
  // go back btns
  $('.btnBack').on('click', function(event) {
    event.preventDefault();
    window.history.go(-1);
    return false;
  });
  $('.close').on('click', function(event) {
    event.preventDefault();
    $('.modal').modal('close');
  });
  $('.collapsible').collapsible({
    accordion: true,
  });
  window.addEventListener('online', function(e) {
    showAlert('You are online !', 5000);
    $('.alert').each(function(index, element) {
      if ($(this).text() == 'Connection is Down !close') {
        $(this).remove();
      }
    });
  });
  window.addEventListener('offline', function(e) {
    showAlert('Connection is Down !', 5000);
    $('.alert').each(function(index, element) {
      if ($(this).text() == 'You are online !close') {
        $(this).remove();
      }
    });
  });
  const events = [];
  const settings = {};
  const element = document.getElementById('caleandar');
  if (element) {
    caleandar(element, events, settings);
  }

  // Logout
  $('.logout').on('click', function(e) {
    e.preventDefault();
    firebase.auth().signOut().then(function() {
      // Sign-out successful.
      console.log('Sign-out successful.');
      $.ajax({
        type: 'POST',
        url: '/sessionLogout',
        data: {},
        success: function(responce) {
          console.log(responce);
          window.location.replace('/login');
        },
      });
    }).catch(function(error) {
      // An error happened.
      console.log(error);
      alert('An error happened.');
    });
  });

  // imit prompt modals
  $('.prompt').modal({
    startingTop: '24%', // Starting top style attribute
    endingTop: '30%', // Ending top style attribute
    dismissible: false, // Modal can be dismissed by clicking outside of the modal
  });
});

/** Display an alert Message box
 * @param {String} msg - Message you want to show.
 * @param {integer} time - Duration it takes to disapear.
 */
function showAlert(msg, time) {
  let str = '<div class="alert card"><span class="alert-msg">'+ msg + '</span>';
  str = str + '<span class="right">';
  str = str + '<span class="alert-close mouse-pointer">';
  str = str + '<i class="material-icons">close</i></span></span></div>';
  const alertBox = $.parseHTML(str);
  $('.alerts-container').prepend(alertBox);
  $('.alerts-container .alert .alert-close').on('click', function(event) {
    event.preventDefault();
    $(this).parents('.alert').remove();
  });
  if (time) {
    setTimeout(function() {
      $(alertBox).remove();
    }, time);
  }
}
/** Display an alert Message box
 * @param {String} msg - Message you want to show.
 * @param {integer} time - Duration it takes to disapear.
 */
function showReportAlert(msg, time) {
  let str = '<div class="alert report card"><span class="alert-msg">'+ msg + '</span>';
  str = str + '<span class="right">';
  str = str + '<span class="mouse-pointer"><a class="alert-ok" href="/response">Respond</a></span>';
  str = str + '<span class="alert-close mouse-pointer">';
  str = str + '<i class="material-icons">close</i></span></span></div>';
  const alertBox = $.parseHTML(str);
  $('.alerts-container').prepend(alertBox);
  $('.alerts-container .alert .alert-close').on('click', function(event) {
    event.preventDefault();
    $(this).parents('.alert').remove();
  });
  if (time) {
    setTimeout(function() {
      $(alertBox).remove();
    }, time);
  }
}
/**
   * Display the error message box
   * @param {String} errCode Unique Error Code
   * @param {String} errDetails Detials description of the error
   * @param {String} errSolution Possible solution to the error
   *
   */
function showErrorMsg(errCode, errDetails, errSolution) {
  $('.error-msg').find('.code').text('Error Code: ' + errCode);
  $('.error-msg').find('.details').text(errDetails);
  $('.error-msg').find('.solution').text(errSolution);
  $('.error-msg').css({'display': 'block'});
}
/**
   * Hide the error message box
   */
function hideErrorMsg() {
  $('.error-msg').css({'display': 'none'});
}


